{% extends "base.html" %}

{% block title %}Ouchi Face | ãƒ›ãƒ¼ãƒ ãƒ©ãƒœã‚¹ãƒšãƒ¼ã‚¹{% endblock %}

{% block content %}
<section class="hero hero--spaces">
  <div class="hero-inner">
    <div class="hero-text">
      <p class="eyebrow">SPACES DIRECTORY</p>
      <h1>ãŠã†ã¡ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä¸€æœ›âœ¨ æ¨ã—AIã‚’ã™ãã«èµ·å‹•ã—ã‚ˆï¼</h1>
      <p class="hero-subtitle">
        Gradioã‚„Streamlitã€ç¤¾å†…ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¾ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ãAIã‚¹ãƒšãƒ¼ã‚¹ã‚’ã¾ã¨ã‚ã¦ç®¡ç†ã€‚
        ãƒãƒ–ã‹ã‚‰ã™ãã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ä»Šæ—¥ã®å®Ÿé¨“ã‚’ãƒ–ãƒ¼ã‚¹ãƒˆã—ã‚ˆã€œï¼
      </p>
    </div>
    <form class="search search--hero" method="get" action="/">
      <div class="search-input">
        <span class="search-icon" aria-hidden="true">ğŸ”</span>
        <input
          type="text"
          name="q"
          placeholder="Ask anything you want to do with AI!"
          value="{{ query }}"
        />
      </div>
      <div class="search-controls">
        <label class="select-label">
          <span>ã‚¿ã‚¤ãƒ—</span>
          <select name="resource_type">
            <option value="all" {% if active_type == 'all' %}selected{% endif %}>All resources</option>
            {% for value, label in type_choices %}
            <option value="{{ value }}" {% if active_type == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </label>
        <button class="button button--primary" type="submit">Search</button>
      </div>
    </form>
    <div class="filter-chips" role="group" aria-label="ãƒªã‚½ãƒ¼ã‚¹ç¨®åˆ¥ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ">
      <a
        class="chip {% if active_type == 'all' %}chip--active{% endif %}"
        href="{% if query %}/?q={{ query | urlencode }}{% else %}/{% endif %}"
      >All</a>
      {% for value, label in type_choices %}
      <a
        class="chip {% if active_type == value %}chip--active{% endif %}"
        href="/?resource_type={{ value }}{% if query %}&q={{ query | urlencode }}{% endif %}"
      >{{ label }}</a>
      {% endfor %}
    </div>
  </div>
</section>

{% if resources %}
  {% if is_filtered %}
  <section class="spaces-section">
    <div class="section-header">
      <h2>æ¤œç´¢çµæœ</h2>
      <p class="section-subtitle">
        {% if query %}ã€Œ{{ query }}ã€{% endif %}
        {% if active_type != 'all' %}{{ type_labels[active_type] }}{% else %}ã™ã¹ã¦{% endif %}ã®ã‚¹ãƒšãƒ¼ã‚¹ãŒ {{ resources | length }} ä»¶ãƒ’ãƒƒãƒˆï¼
      </p>
    </div>
    <div class="card-grid">
      {% for resource in featured_resources %}
      <article class="resource-card" data-type="{{ resource.resource_type.value }}">
        <div class="card-header">
          {% if resource.icon_url %}
          <img src="{{ resource.icon_url }}" alt="{{ resource.name }}" class="card-avatar" />
          {% else %}
          <div class="card-avatar card-avatar--fallback">{{ resource.name[:1] if resource.name else '?' }}</div>
          {% endif %}
          <div>
            <span class="badge">{{ type_labels[resource.resource_type.value] }}</span>
            <h3><a href="/resources/{{ resource.id }}">{{ resource.name }}</a></h3>
          </div>
        </div>
        <p class="resource-description">{{ resource.description }}</p>
        <div class="card-meta">
          {% if resource.location %}
          <span class="meta-item" title="ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹">ğŸ“ {{ resource.location }}</span>
          {% endif %}
          {% if resource.repo_url %}
          <span class="meta-item">
            ğŸ’¾ <a href="{{ resource.repo_url }}" target="_blank" rel="noopener">Repo</a>
          </span>
          {% endif %}
        </div>
        <div class="resource-footer">
          {% if resource.link_url %}
          <a class="button button--ghost" href="{{ resource.link_url }}" target="_blank" rel="noopener">Launch</a>
          {% endif %}
          <a class="button button--outline" href="/resources/{{ resource.id }}">è©³ç´°ã‚’è¦‹ã‚‹</a>
        </div>
      </article>
      {% endfor %}
    </div>
  </section>
  {% else %}
    {% if featured_resources %}
    <section class="spaces-section">
      <div class="section-header">
        <h2>Spaces of the week</h2>
        <p class="section-subtitle">ä»Šé€±ã¿ã‚“ãªãŒè§¦ã‚ŠãŸã„ã€ãŠã†ã¡AIã®æ³¨ç›®ã‚¹ãƒšãƒ¼ã‚¹</p>
      </div>
      <div class="card-rail">
        {% for resource in featured_resources %}
        <article class="resource-card" data-type="{{ resource.resource_type.value }}">
          <div class="card-header">
            {% if resource.icon_url %}
            <img src="{{ resource.icon_url }}" alt="{{ resource.name }}" class="card-avatar" />
            {% else %}
            <div class="card-avatar card-avatar--fallback">{{ resource.name[:1] if resource.name else '?' }}</div>
            {% endif %}
            <div>
              <span class="badge">{{ type_labels[resource.resource_type.value] }}</span>
              <h3><a href="/resources/{{ resource.id }}">{{ resource.name }}</a></h3>
            </div>
          </div>
          <p class="resource-description">{{ resource.description }}</p>
          <div class="card-meta">
            {% if resource.location %}
            <span class="meta-item" title="ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹">ğŸ“ {{ resource.location }}</span>
            {% endif %}
            {% if resource.repo_url %}
            <span class="meta-item">
              ğŸ’¾ <a href="{{ resource.repo_url }}" target="_blank" rel="noopener">Repo</a>
            </span>
            {% endif %}
          </div>
          <div class="resource-footer">
            {% if resource.link_url %}
            <a class="button button--ghost" href="{{ resource.link_url }}" target="_blank" rel="noopener">Launch</a>
            {% endif %}
            <a class="button button--outline" href="/resources/{{ resource.id }}">è©³ç´°ã‚’è¦‹ã‚‹</a>
          </div>
        </article>
        {% endfor %}
      </div>
    </section>
    {% endif %}
    {% for type_value, items in grouped_resources.items() %}
    <section class="spaces-section">
      <div class="section-header">
        <h2>{{ type_labels[type_value] }}ã‚¹ãƒšãƒ¼ã‚¹</h2>
        <p class="section-subtitle">ãƒ­ãƒ¼ã‚«ãƒ«{{ type_labels[type_value] }}ã®å¸¸è¨­ã‚«ã‚¿ãƒ­ã‚°</p>
      </div>
      <div class="card-grid card-grid--loose">
        {% for resource in items %}
        <article class="resource-card" data-type="{{ resource.resource_type.value }}">
          <div class="card-header">
            {% if resource.icon_url %}
            <img src="{{ resource.icon_url }}" alt="{{ resource.name }}" class="card-avatar" />
            {% else %}
            <div class="card-avatar card-avatar--fallback">{{ resource.name[:1] if resource.name else '?' }}</div>
            {% endif %}
            <div>
              <span class="badge">{{ type_labels[resource.resource_type.value] }}</span>
              <h3><a href="/resources/{{ resource.id }}">{{ resource.name }}</a></h3>
            </div>
          </div>
          <p class="resource-description">{{ resource.description }}</p>
          <div class="card-meta">
            {% if resource.location %}
            <span class="meta-item" title="ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹">ğŸ“ {{ resource.location }}</span>
            {% endif %}
            {% if resource.repo_url %}
            <span class="meta-item">
              ğŸ’¾ <a href="{{ resource.repo_url }}" target="_blank" rel="noopener">Repo</a>
            </span>
            {% endif %}
          </div>
          <div class="resource-footer">
            {% if resource.link_url %}
            <a class="button button--ghost" href="{{ resource.link_url }}" target="_blank" rel="noopener">Launch</a>
            {% endif %}
            <a class="button button--outline" href="/resources/{{ resource.id }}">è©³ç´°ã‚’è¦‹ã‚‹</a>
          </div>
        </article>
        {% endfor %}
      </div>
    </section>
    {% endfor %}
  {% endif %}
{% else %}
<p class="empty">ã¾ã ã‚¹ãƒšãƒ¼ã‚¹ãŒç™»éŒ²ã•ã‚Œã¦ãªã„ã¿ãŸã„ã€‚ã¾ãšã¯å³ä¸Šã®ã€Œæ–°è¦ç™»éŒ²ã€ã§æ¨ã—AIã‚’ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã—ã‚ˆã£ï¼</p>
{% endif %}
{% endblock %}
